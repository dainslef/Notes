<!-- TOC -->

- [VIM基本使用](#vim基本使用)
	- [保存與退出](#保存與退出)
	- [使用系統剪貼板](#使用系統剪貼板)
	- [跳轉](#跳轉)
	- [複製與刪除](#複製與刪除)
	- [多行編輯](#多行編輯)
	- [使用root權限重新打開當前文件](#使用root權限重新打開當前文件)
	- [空格與製表符](#空格與製表符)
	- [設置文件行尾](#設置文件行尾)
	- [轉換文件編碼](#轉換文件編碼)
	- [緩衝區管理](#緩衝區管理)
	- [vimdiff](#vimdiff)
	- [關閉高亮比較](#關閉高亮比較)
	- [操作回滾](#操作回滾)

<!-- /TOC -->



# VIM基本使用
VIM操作可參考[博客](https://paulrougieux.github.io/vim.html)。

## 保存與退出
- `:w` 寫入文件
- `:q` 退出vim，存在多個打開文件時只會關閉當前文件，而不是退出vim
- `:wq` 保存並退出
- `:wall` 全部窗口寫入
- `:qall` 全部窗口退出

## 使用系統剪貼板
- `"+y` 複製到系統剪貼板
- `"+p` 粘貼系統剪貼板中的內容
- `"+gp` 粘貼並將光標移動到粘貼的內容之後

## 跳轉
- `gg` 跳轉到行尾
- `行數gg` 跳轉到指定行
- `/行數` 跳轉到指定行
- `G` 跳轉到文件尾

## 複製與刪除
- `yy` 複製當前行
- `dd` 刪除當前行
- `數值yy` 拷貝光標下指定數值的行數
- `數值dd` 刪除光標下指定數值的行數
- `數值1,數值2yy` 拷貝數值1到數值2行數之間的內容
- `數值1,數值2dd` 刪除數值1到數值2行數之間的內容
- `數值,yy` 拷貝數值行數到當前行之間的內容
- `數值,dd` 刪除數值行數到當前行之間的內容

## 多行編輯
先使用`shift + v`組合鍵進入`VISUAL BLOCK`模式，
在該模式下移動光標同時標註多行，標註了需要編輯的行後輸入`shift + i`組合鍵進入多行編輯模式，
在該模式下輸入的內容最終會對所有行生效。

## 使用root權限重新打開當前文件
執行：

```
:!sudo vim %
```

## 空格與製表符
- `retab!` 替換空格/製表符爲配置中的設定(包括行尾的製表符和空格)。

## 設置文件行尾
- `:set fileformat=unix` 設置行尾爲unix(\n)
- `:set ff=unix` 作用同上
- `:set fileformat=dos` 設置行尾爲windows行尾(\r\n)
- `:set ff=dos` 作用同上

## 轉換文件編碼
- `:set fileencoding=utf-8` 將文件轉換爲`UTF-8`編碼
- `:set fenc=utf-8` 作用同上

## 緩衝區管理
vim可以在一個會話中打開多個文件，不同的文件顯示在不同的緩衝區(buffer)中。

- `:o 文件路徑` 開闢一個新緩衝區打開文件
- `:bnext` 轉到下一個緩衝區
- `:bprevious` 轉到前一個緩衝區
- `:bfirst` 轉到首個緩衝區
- `:blast` 轉到最後的緩衝區
- `:bdelete 緩衝區編號` 刪除指定緩衝區(可使用`:buffers!`找回)，默認刪除當前緩衝區
- `:bwipe 緩衝區編號` 徹底刪除指定緩衝區，默認刪除當前緩衝區

## vimdiff
vim可以做文件diff：

```sh
vimdiff [file_name1] [file_name2]
```

或者：

```sh
vim -d [file_name1] [file_name2]
```

## 關閉高亮比較
- `:nohls` 用於在查找結束之後關閉查找匹配內容的高亮

## 操作回滾
- `u` 取消上次操作
- `<C-R>` 重複上次操作
- `:<C-F>` 歷史命令記錄窗口
